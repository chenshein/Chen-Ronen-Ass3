<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <link rel="icon" href="%PUBLIC_URL%/Chat-Icon-Fav.png"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="theme-color" content="#000000"/>
    <meta
            name="description"
            content="Web site created using create-react-app"
    />
    <!--    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png"/>-->
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json"/>
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <!--  Bootstrap  -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <title>ChitChat</title>
</head>
<body>
<noscript>You need to enable JavaScript to run this app.</noscript>
<div id="root"></div>

<!-- Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>

<!-- Modal -->
<script>
    const myModal = document.getElementById('myModal')
    const myInput = document.getElementById('myInput')

    myModal && myModal.addEventListener('shown.bs.modal', () => {
        myInput.focus()
    })
</script>

<!--Check Language Direction and set it to the input field-->
<script>
    document.addEventListener('input', (event) => {
        const element = event.target;
        if (element.tagName.toLowerCase() === 'input') {
            const text = element.value;
            const firstNonAsciiCharIndex = text.search(/[^\u0000-\u007F]/);
            const dir = firstNonAsciiCharIndex !== -1 ? 'rtl' : 'ltr';
            element.setAttribute('dir', dir);
        }
    });
</script>

<!--Preload all images in the document-->
<script>
    function preloadImage(url) {
        const xhr = new XMLHttpRequest();
        xhr.open("GET", url, true);
        xhr.responseType = "blob";
        xhr.onload = () => {
            if (xhr.status === 200) {
                const blob = xhr.response;
                const img = new Image();
                img.src = URL.createObjectURL(blob);
                // Do something with the preloaded image here
            }
        };
        xhr.send();
    }

    imageArray = [
        "src/assets/chat-image.svg",
        "public/favicon.ico",
        "public/Chat-Icon-Fav.png",
        "public/Chat-Icon.png"];

    // get all img tags in the document and iterate over them
    document.querySelectorAll("img").forEach((img) => {
        // get the src attribute
        const src = img.getAttribute("src");
        // add the src to the array
        imageArray.push(src);
    });

    // preload all images
    imageArray.forEach((src) => preloadImage(src));


</script>

</body>
</html>
